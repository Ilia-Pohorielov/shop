$(document).ready(function(){function e(e,t){var i=[null,null];i[e]=t,r.noUiSlider.set(i)}function t(){for(var e=document.getElementsByClassName("height"),t=0,i=0;i<e.length;++i)e[i].style.height="",t<e[i].clientHeight&&(t=e[i].clientHeight);for(i=0;i<e.length;++i)e[i].style.height=t+"px"}function i(e,t){var i=$(e),n=i.text(),s=(n.length,t);if(n.length>=s){n=n.slice(0,s)+"..",$(i).text(n)}}$(".js-search").on("click",function(){$(".search-block").toggleClass("open"),setTimeout(function(){$(".search-block .field-search input").focus()},1e3)}),$(".top-main .js-slider").slick({arrows:!1,dots:!0,autoplay:!0,autoplaySpeed:5e3,pauseOnHover:!1,fade:!0,cssEase:"linear",touchThreshold:100}),$(".block-collection .js-slider").slick({arrows:!0,slidesToShow:4,initialSlide:0,slidesToScroll:1,infinite:!0,responsive:[{breakpoint:1320,settings:{slidesToShow:3}},{breakpoint:991,settings:{slidesToShow:2,arrows:!1}},{breakpoint:767,settings:{slidesToShow:1,arrows:!1}}]}),$(".block-instagram .js-slider").slick({arrows:!0,slidesToShow:3,initialSlide:0,slidesToScroll:1,infinite:!0,responsive:[{breakpoint:991,settings:{slidesToShow:2,arrows:!1}},{breakpoint:767,settings:{slidesToShow:1,arrows:!1}}]}),$(".slider.js-slider").slick({arrows:!1,dots:!0,autoplay:!0,autoplaySpeed:5e3,pauseOnHover:!1}),$(window).width()<=991&&($(window).on("resize",function(){$(".js-panel").addClass("open"),$(".js-panel #criteria-collapse-mobile").removeClass("in")}),$(window).on("load",function(){$(".js-panel").addClass("open"),$(".js-panel #criteria-collapse-mobile").removeClass("in")}),$(".js-panel").addClass("open"),$(".js-panel #criteria-collapse-mobile").removeClass("in")),$(".js-big-slider").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!1,asNavFor:".js-mini-slider"}),$(".js-mini-slider").slick({slidesToShow:3,vertical:!0,slidesToScroll:1,asNavFor:".js-big-slider",dots:!1,focusOnSelect:!0});var n=new ScrollMagic.Controller;if($(window).width()>=991&&(new ScrollMagic.Scene({triggerElement:".js-animate-parallax",triggerHook:.8,duration:"500%"}).setTween(".js-animate-parallax .right",{y:"-50%",ease:Power0.easeNone}).addTo(n),new ScrollMagic.Scene({triggerElement:".js-animate-parallax",triggerHook:.8,duration:"500%"}).setTween(".js-animate-parallax .left",{y:"50%",ease:Power0.easeNone}).addTo(n)),$(".js-scroll").mCustomScrollbar({mouseWheel:{scrollAmount:200}}),$('.js_validate [type="submit"]').on("click",function(){return $(this).siblings(".form-group").find("input").attr("placeholder",""),$(this).siblings(".form-group").find("input").val(""),validate($(this).parents(".js_validate"))}),$('.js_validate [type="submit"]').on("click",function(){}),null!==document.querySelector(".range-slider")){var s,o,a,l,r=document.getElementById("range");s=parseInt(r.getAttribute("data-min")),o=parseInt(r.getAttribute("data-max")),a=parseInt(r.getAttribute("data-slider-min")),l=parseInt(r.getAttribute("data-slider-max"));var c=[document.getElementById("input-with-keypress-0"),document.getElementById("input-with-keypress-1")];l||(a=s),l||(l=o),0!=o&&0!=s&&(noUiSlider.create(r,{start:[a,l],connect:!0,step:1,range:{min:s,max:o}}),r.noUiSlider.on("update",function(e,t){c[t].value=e[t]}),c.forEach(function(t,i){t.addEventListener("change",function(){e(i,this.value)}),t.addEventListener("keydown",function(t){var n,s=r.noUiSlider.get(),o=Number(s[i]),a=r.noUiSlider.steps()[i];switch(t.which){case 13:e(i,this.value);break;case 38:!1===(n=a[1])&&(n=1),null!==n&&e(i,o+n);break;case 40:!1===(n=a[0])&&(n=1),null!==n&&e(i,o-n)}})}))}$(".js-mobile-menu").on("click",function(){$(this).toggleClass("open"),$(".header-menu").toggleClass("open"),$(".top-header").toggleClass("open"),$(".search-block").removeClass("open")}),$(".js-sub-menu").on("click",function(){$(".sub-menu > span").toggleClass("active"),$(".sub-menu-category").toggleClass("open")}),$(window).width()>767&&($(window).on("resize",function(){t()}),$(window).on("load",function(){t()})),$(".js-search").on("click",function(){$(".header-menu").removeClass("open"),$(".main-hamburger").removeClass("open"),$(".top-header").removeClass("open")}),$(document).click(function(e){$(e.target).closest(".bottom-header").length||($(".search-block.open").removeClass("open"),e.stopPropagation())}),t(),$(window).width()>767&&($(window).on("resize",function(){t()}),$(window).on("load",function(){t()})),window.File&&window.FileList&&window.FileReader?$(".input-file").on("change",function(e){var t=$(this);if(t.val()){t.val().replace(/C:\\fakepath\\/i,"");var i=new FileReader;i.onload=function(e){t.parents(".upload-user-photo").find("img").attr("src",e.target.result)},i.readAsDataURL(e.target.files[0])}}):alert("File API не поддерживается данным браузером");for(var d=$(".js-accordion.product-list"),u=$(".js-total .caret"),h=0;h<d.length;h++){var p=d[h];p.children.length>=3&&p.parentNode.parentNode.classList.add("accordion")}u.on("click",function(){$(this).parents("tr").find(".js-accordion").toggleClass("open")}),$(".js-zoom-img").magnificPopup({type:"image"}),$(".big-slider .image").each(function(){$(this).magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0,navigateByImgClick:!0},fixedContentPos:!1})}),$(".js-size-open").on("click",function(){$(this).parent().toggleClass("open"),$(this).parent().siblings().removeClass("open")}),$(".js-anchor").on("click",function(){var e=$(".block-question-answer .navigation-item").attr("id");if($(this).attr("href")==e)return $("html, body").animate({scrollTop:e},600),!1});$(".cart-item").find(".js-hide").each(function(e,t){i($(t),50)});$(".collection-item .description .text").each(function(e,t){i($(t),65)});$(".js-anchor").on("click",function(){var e=$(this).attr("href"),t=$(e).offset().top;$("html, body").animate({scrollTop:t},600)}),$(".js-reinit a").on("shown.bs.tab",function(e){$(".block-collection .js-slider").slick("unslick"),$(".block-collection .js-slider").slick("init")}),$(".js-home-anchor").on("click",function(){var e=$(".block-collection").offset().top;$("html, body").animate({scrollTop:e},600)}),$('form button[type="submit"]').hasClass("has-error")&&$(this).find("input").attr("placeholder","213123 "),$("form .form-group").on("click",function(){$(this).hasClass("has-error")&&($(this).find(".error-text").hide(),$(this).find("input").focus())}),$("form .input-group").on("click",function(){$(this).hasClass("has-error")&&($(this).find(".error-text").hide(),$(this).find("input").focus())}),$(".js-nav-title").click(function(){var e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,e.classList.remove("show"),$(this).removeClass("rotate")):(e.style.maxHeight=e.scrollHeight+"%",e.classList.add("show"),$(this).addClass("rotate"))}),$(document).on("click",".js-minus",function(){var e=$(this).parent().find("input"),t=parseInt(e.attr("value"))-1;return t=t<1?1:t,e.attr("value",t),e.change(),changeCountCart(e.attr("data-cart-key"),t),!1}),$(document).on("click",".js-plus",function(){var e=$(this).parent().find("input");return _max=parseInt(e.attr("max")),_val=parseInt(e.attr("value"))+1,_val>_max?alert("Ошибка","Выбрано максимально доступное кол-во товаров."):(e.attr("value",_val),e.change(),e.hasClass("js_cart")&&changeCountCart(e.attr("data-cart-key"),_val)),!1}),$(".js-change").on("click",function(){return $(this).parent().find(".settings").toggleClass("open"),!1})});